const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsName = 35
const fontsInfo = 25
const fontsOthers = 27
const colorName = "#EEEEEE"
module.exports.config = {
    name: "checktt", // TÃªn lá»‡nh, Ä‘Æ°á»£c sá»­ dá»¥ng trong viá»‡c gá»i lá»‡nh
    version: "1.0.1", // phiÃªn báº£n cá»§a module nÃ y
    hasPermssion: 0, // Quyá»n háº¡n sá»­ dá»¥ng, vá»›i 0 lÃ  toÃ n bá»™ thÃ nh viÃªn, 1 lÃ  quáº£n trá»‹ viÃªn trá»Ÿ lÃªn, 2 lÃ  admin/owner
    credits: "Milo", // CÃ´ng nháº­n module sá»Ÿ há»¯u lÃ  ai
    description: "Check tÆ°Æ¡ng tÃ¡c ngÃ y/tuáº§n/toÃ n bá»™", // ThÃ´ng tin chi tiáº¿t vá» lá»‡nh
    commandCategory: "Thá»‘ng kÃª", // Thuá»™c vÃ o nhÃ³m nÃ o: system, other, game-sp, game-mp, random-img, edit-img, media, economy, ...
    usages: "< all/week/day >", // CÃ¡ch sá»­ dá»¥ng lá»‡nh
    cooldowns: 5, // Thá»i gian má»™t ngÆ°á»i cÃ³ thá»ƒ láº·p láº¡i lá»‡nh
    dependencies: {
        "fs": "",
        "moment-timezone": "",
         canvas: "",
        "systeminformation": "",
        "fs-extra": ""
        
    }
};
function byte2mb(bytes) {
	const units = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
	let l = 0, n = parseInt(bytes, 10) || 0;
	while (n >= 1024 && ++l) n = n / 1024;
	return `${n.toFixed(n < 10 && l > 0 ? 1 : 0)} ${units[l]}`;
}
 module.exports.circle = async (image) => {
  const jimp = global.nodemodule["jimp"];
  image = await jimp.read(image);
  image.circle();
  return await image.getBufferAsync("image/png");
}
const path = __dirname + '/cache/checktt/';
const { min } = require('moment-timezone');
const moment = require('moment-timezone');
const { format } = require('path');
 
module.exports.onLoad = () => {
    const fs = require('fs');
    if (!fs.existsSync(path) || !fs.statSync(path).isDirectory()) {
        fs.mkdirSync(path, { recursive: true });
    }
  setInterval(() => {
    const today = moment.tz("Asia/Ho_Chi_Minh").day();
    const checkttData = fs.readdirSync(path);
    checkttData.forEach(file => {
      let fileData = JSON.parse(fs.readFileSync(path + file));
      if (fileData.time != today) {
        setTimeout(() => {
          fileData = JSON.parse(fs.readFileSync(path + file));
          if (fileData.time != today) {
            fileData.time = today;
            fs.writeFileSync(path + file, JSON.stringify(fileData, null, 4));
          }
        }, 60 * 1000);
      }
    })
  }, 60 * 1000);
}
 
module.exports.handleEvent = async function ({ api, args, Users, event, Threads, }) {
  const threadInfo = await api.getThreadInfo(event.threadID)
    if (global.client.sending_top == true) return;
    const fs = global.nodemodule['fs'];
    const { threadID, senderID } = event;
    const today = moment.tz("Asia/Ho_Chi_Minh").day();
 
    if (!fs.existsSync(path + threadID + '.json')) {
        const newObj = {
            total: [],
            week: [],
            day: [],
            time: today
        };
        fs.writeFileSync(path + threadID + '.json', JSON.stringify(newObj, null, 4));
        const threadInfo = await Threads.getInfo(threadID) || {};
        if (threadInfo.hasOwnProperty('isGroup') && threadInfo.isGroup) {
            const UserIDs = threadInfo.participantIDs;
            for (user of UserIDs) {
                if (!newObj.total.find(item => item.id == user)) {
                    newObj.total.push({
                        id: user,
                        count: 0
                    });
                }
                if (!newObj.week.find(item => item.id == user)) {
                    newObj.week.push({
                        id: user,
                        count: 0
                    });
                }
                if (!newObj.day.find(item => item.id == user)) {
                    newObj.day.push({
                        id: user,
                        count: 0
                    });
                }
            }
        }
        fs.writeFileSync(path + threadID + '.json', JSON.stringify(newObj, null, 4));
    }
    const threadData = JSON.parse(fs.readFileSync(path + threadID + '.json'));
    if (threadData.time != today) {
      global.client.sending_top = true;
      setTimeout(() => global.client.sending_top = false, 5 * 60 * 1000);
    }
    const userData_week_index = threadData.week.findIndex(e => e.id == senderID);
    const userData_day_index = threadData.day.findIndex(e => e.id == senderID);
    const userData_total_index = threadData.total.findIndex(e => e.id == senderID);
    if (userData_total_index == -1) {
        threadData.total.push({
            id: senderID,
            count: 1,
        });
    } else threadData.total[userData_total_index].count++;
    if (userData_week_index == -1) {
        threadData.week.push({
            id: senderID,
            count: 1
        });
    } else threadData.week[userData_week_index].count++;
    if (userData_day_index == -1) {
        threadData.day.push({
            id: senderID,
            count: 1
        });
    } else threadData.day[userData_day_index].count++;
    // if (threadData.time != today) {
    //     threadData.day.forEach(e => {
    //         e.count = 0;
    //     });
    //     if (today == 1) {
    //         threadData.week.forEach(e => {
    //             e.count = 0;
    //         });
    //     }
    //     threadData.time = today;
    // }
 
    fs.writeFileSync(path + threadID + '.json', JSON.stringify(threadData, null, 4));
}
 
module.exports.run = async function ({ api, event, args, Users, Threads }) {
  let threadInfo = await api.getThreadInfo(event.threadID);
    await new Promise(resolve => setTimeout(resolve, 500));
    const fs = global.nodemodule['fs'];
    const { threadID, messageID, senderID, mentions } = event;
    if (!fs.existsSync(path + threadID + '.json')) {
        return api.sendMessage("ChÆ°a cÃ³ thá»‘ng kÃª dá»¯ liá»‡u", threadID);
    }
    const threadData = JSON.parse(fs.readFileSync(path + threadID + '.json'));
    const query = args[0] ? args[0].toLowerCase() : '';
    
    if(query == 'locmem') {
        let threadInfo = await api.getThreadInfo(threadID);
        if(!threadInfo.adminIDs.some(e => e.id == senderID)) return api.sendMessage("[âšœï¸]âœ Báº¡n khÃ´ng cÃ³ quyá»n sá»­ dá»¥ng lá»‡nh nÃ y", threadID);
        if(!threadInfo.isGroup) return api.sendMessage("[âšœï¸]âœ Chá»‰ cÃ³ thá»ƒ sá»­ dá»¥ng trong nhÃ³m", threadID);
        if(!threadInfo.adminIDs.some(e => e.id == api.getCurrentUserID())) return api.sendMessage("[âšœï¸]âœ Bot cáº§n qtv Ä‘á»ƒ thá»±c hiá»‡n lá»‡nh", threadID);
        if(!args[1] || isNaN(args[1])) return api.sendMessage("Error", threadID);
        let minCount = args[1],
            allUser = threadInfo.participantIDs;
        for(let user of allUser) {
            if(user == api.getCurrentUserID()) continue;
            if(!threadData.total.some(e => e.id == user) || threadData.total.find(e => e.id == user).count < minCount) {
                setTimeout(async () => {
                    await api.removeUserFromGroup(user, threadID);
                    for(let e in threadData) {
                        if(e == 'time') continue;
                        if(threadData[e].some(e => e.id == user)) {
                            threadData[e].splice(threadData[e].findIndex(e => e.id == user), 1);
                        }
                    }
                }, 1000);
            }
        }
        return api.sendMessage(`[âšœï¸]âœ ÄÃ£ xÃ³a ${allUser.length - threadData.total.filter(e => e.count >= minCount).length} thÃ nh viÃªn khÃ´ng Ä‘á»§ ${minCount} láº§n`, threadID);
    }

    var header = '',
        body = '',
        footer = '',
        msg = '',
        count = 1,
        storage = [],
        data = 0;
    if (query == 'all' || query == '-a') {
        header = '===ğ—§ğ—¨Ì›ğ—¢Ì›ğ—¡ğ—š ğ—§ğ—”Ìğ—– ğ—”ğ—Ÿğ—Ÿ===\n';
        data = threadData.total;
    } else if (query == 'week' || query == '-w') {
        header = '===ğ—§ğ—¨Ì›ğ—¢Ì›ğ—¡ğ—š ğ—§ğ—”Ìğ—– ğ—§ğ—¨ğ—”Ì‚Ì€ğ—¡===\n';
        data = threadData.week;
    } else if (query == 'day' || query == '-d') {
        header = '===ğ—§ğ—¨Ì›ğ—¢Ì›ğ—¡ğ—š ğ—§ğ—”Ìğ—– ğ—¡ğ—šğ—”Ì€ğ—¬===\n';
        data = threadData.day;
    } else {
        data = threadData.total;
    }
    for (const item of data) {
        const userName = await Users.getNameUser(item.id) || 'TÃªn khÃ´ng tá»“n táº¡i';
        const itemToPush = item;
        itemToPush.name = userName;
        storage.push(itemToPush);
    };
    let check = ['all', '-a', 'week', '-w', 'day', '-d'].some(e => e == query);
    if (!check && Object.keys(mentions).length > 0) {
        storage = storage.filter(e => mentions.hasOwnProperty(e.id));
    }
    //sort by count from high to low if equal sort by name
    storage.sort((a, b) => {
        if (a.count > b.count) {
            return -1;
        }
        else if (a.count < b.count) {
            return 1;
        } else {
            return a.name.localeCompare(b.name);
        }
    });
    if ((!check && Object.keys(mentions).length == 0) || (!check && Object.keys(mentions).length == 1) || (!check && event.type == 'message_reply')) {
        const UID = event.messageReply ? event.messageReply.senderID : Object.keys(mentions)[0] ? Object.keys(mentions)[0] : senderID;
        const userRank = storage.findIndex(e => e.id == UID);
        const userTotal = threadData.total.find(e => e.id == UID) ? threadData.total.find(e => e.id == UID).count : 0;
        const userTotalWeek = threadData.week.find(e => e.id == UID) ? threadData.week.find(e => e.id == UID).count : 0;
        const userTotalDay = threadData.day.find(e => e.id == UID) ? threadData.day.find(e => e.id == UID).count : 0;
        const nameUID = storage[userRank].name || 'TÃªn khÃ´ng tá»“n táº¡i';
        const target = UID == senderID ? 'Báº¡n' : nameUID;
      const moment = require("moment-timezone");
  const timeNow = moment.tz("Asia/Ho_Chi_Minh").format("DD/MM/YYYY || HH:mm:ss");
      var permission;
        if (global.config.ADMINBOT.includes(UID)) permission = `Admin Bot`;
else if
(global.config.NDH.includes(UID)) 
permission = `NgÆ°á»i Há»— Trá»£`; else if (threadInfo.adminIDs.some(i => i.id == UID)) permission = `Quáº£n Trá»‹ ViÃªn`; else permission = `ThÃ nh ViÃªn`;
      var thu = moment.tz('Asia/Ho_Chi_Minh').format('dddd');
  if (thu == 'Sunday') thu = 'ğ‚ğ¡ğ®Ì‰ ğğ¡ğšÌ£Ì‚ğ­'
  if (thu == 'Monday') thu = 'ğ“ğ¡ğ®Ì›Ì ğ‡ğšğ¢'
  if (thu == 'Tuesday') thu = 'ğ“ğ¡ğ®Ì›Ì ğğš'
  if (thu == 'Wednesday') thu = 'ğ“ğ¡ğ®Ì›Ì ğ“ğ®Ì›'
  if (thu == "Thursday") thu = 'ğ“ğ¡ğ®Ì›Ì ğğšÌ†ğ¦'
  if (thu == 'Friday') thu = 'ğ“ğ¡ğ®Ì›Ì ğ’ğšÌğ®'
  if (thu == 'Saturday') thu = 'ğ“ğ¡ğ®Ì›Ì ğğšÌ‰ğ²'
      let threadName = threadInfo.threadName;
        if (userRank == -1) {
            return api.sendMessage(`âœ ${target} chÆ°a cÃ³ thá»‘ng kÃª dá»¯ liá»‡u`, threadID);
        }
        body +=
          `==== [ ğ—–ğ—›ğ—˜ğ—–ğ— ğ—§ğ—¨Ì›ğ—¢Ì›ğ—¡ğ—š ğ—§ğ—”Ìğ—– ] =====\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n[ğŸ‘¤] âœ ğ—¡ğ—®ğ—ºğ—²: ${nameUID}\n[ğŸ“Œ] âœ ğ—™ğ—®ğ—°ğ—²ğ—¯ğ—¼ğ—¼ğ—¸: https://www.facebook.com/profile.php?id=${event.senderID}\n[ğŸŒ¸] âœ ğ—œğ——: ${event.senderID}\n[ğŸ’“] âœ ğ—–ğ—µğ˜‚Ì›Ìğ—° ğ˜ƒğ˜‚Ì£: ${permission}\n[ğŸ”°] âœ ğ—§ğ—²Ì‚ğ—» ğ—»ğ—µğ—¼Ìğ—º: ${threadName}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n[ğŸ’Œ] âœ ğ—§ğ—¶ğ—» ğ—»ğ—µğ—®Ì†Ìğ—» ğ˜ğ—¿ğ—¼ğ—»ğ—´ ğ—»ğ—´ğ—®Ì€ğ˜†: ${userTotalDay}\n[ğŸ’“] âœ ğ—›ğ—®Ì£ğ—»ğ—´ ğ˜ğ—¿ğ—¼ğ—»ğ—´ ğ—»ğ—´ğ—®Ì€ğ˜†: ${count++}\n[ğŸ’¬] âœ ğ—§ğ—¶ğ—» ğ—»ğ—µğ—®Ì†Ìğ—» ğ˜ğ—¿ğ—¼ğ—»ğ—´ ğ˜ğ˜‚ğ—®Ì‚Ì€ğ—»: ${userTotalWeek}\n[ğŸ§¸] âœ ğ—›ğ—®Ì£ğ—»ğ—´ ğ˜ğ—¿ğ—¼ğ—»ğ—´ ğ˜ğ˜‚ğ—®Ì‚Ì€ğ—»: ${count++}\n[ğŸ“š] âœ ğ—§ğ—¼Ì‚Ì‰ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ—»ğ—µğ—®Ì†Ìğ—»: ${userTotal}\n[ğŸ¥‡] âœ ğ—›ğ—®Ì£ğ—»ğ—´ ğ˜ğ—¼Ì‚Ì‰ğ—»ğ—´:  ${userRank + 1}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n[ğŸ’®] âœ ğ—¡ğ—²Ì‚Ìğ˜‚ ğ—ºğ˜‚ğ—¼Ì‚Ìğ—» ğ˜…ğ—²ğ—º ğ˜ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ—»ğ—µğ—¼Ìğ—º ğ—¯ğ—®Ì£ğ—» ğ˜ğ—µğ—®Ì‰ ğ—°ğ—®Ì‰ğ—º ğ˜…ğ˜‚Ìğ—° "â¤" ğ˜ƒğ—®Ì€ğ—¼ ğ˜ğ—¶ğ—» ğ—»ğ—µğ—®Ì†Ìğ—» ğ—»ğ—®Ì€ğ˜† ğ—°ğ˜‚Ì‰ğ—® ğ—¯ğ—¼ğ˜`.replace(/^ +/gm, '');
    } else {
        body = storage.map(item => {
            return `${count++}. ${item.name} (${item.count})`;
        }).join('\n');
        footer = `âœ Tá»•ng Tin Nháº¯n: ${storage.reduce((a, b) => a + b.count, 0)}`;
    }
  async function streamURL(url, mime='jpg') {
    const dest = `${__dirname}/cache/${Date.now()}.${mime}`,
    downloader = require('image-downloader'),
    fse = require('fs-extra');
    await downloader.image({
        url, dest
    });
    setTimeout(j=>fse.unlinkSync(j), 60*1000, dest);
    return fse.createReadStream(dest);
};
    msg = `${header}\n${body}\n${footer}`;
    api.sendMessage({body: msg, attachment: [await streamURL(threadInfo.imageSrc), await streamURL(`https://graph.facebook.com/${event.senderID}/picture?height=720&width=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)]}, threadID, (err, info) => {
    global.client.handleReaction.push({
      name: this.config.name, 
      messageID: info.messageID,
      author: event.senderID,
    })
    },event.messageID);
                     }
module.exports.handleReaction = async ({ event, api, handleReaction, Currencies, Users}) => {
const axios = global.nodemodule["axios"];
const fs = global.nodemodule["fs-extra"];
  const { threadID, messageID, userID } = event;
  const moment = require("moment-timezone");
    var gio = moment.tz("Asia/Ho_Chi_Minh").format("D/MM/YYYY || HH:mm:ss");
    var thu = moment.tz('Asia/Ho_Chi_Minh').format('dddd');
  if (thu == 'Sunday') thu = 'Chá»§ Nháº­t'
  if (thu == 'Monday') thu = 'Thá»© Hai'
  if (thu == 'Tuesday') thu = 'Thá»© Ba'
  if (thu == 'Wednesday') thu = 'Thá»© TÆ°'
  if (thu == "Thursday") thu = 'Thá»© NÄƒm'
  if (thu == 'Friday') thu = 'Thá»© SÃ¡u'
  if (thu == 'Saturday') thu = 'Thá»© Báº£y'
if (event.userID != handleReaction.author) return;
if (event.reaction != "â¤") return; 
 api.unsendMessage(handleReaction.messageID);
        var msg = `=== [ ğ— ğ—˜ğ—¡ğ—¨ ğ—§ğ—›ğ—¢Ì‚ğ—¡ğ—š ğ—§ğ—œğ—¡ ] ===\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ­. ğ—«ğ—²ğ—º ğ˜ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ—°ğ˜‚Ì‰ğ—® ğ—»ğ—µğ—¼Ìğ—º\nğŸ®. ğ—§ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ—¹ğ—¶ğ—²Ì‚ğ—» ğ—µğ—²Ì‚Ì£ ğ—®ğ—±ğ—ºğ—¶ğ—» ğ—¯ğ—¼ğ˜\nğŸ¯. ğ—Ÿğ—¼Ì£ğ—° ğ—»ğ—´ğ˜‚Ì›ğ—¼Ì›Ì€ğ—¶ ğ—±ğ˜‚Ì€ğ—»ğ—´ ğ—™ğ—®ğ—°ğ—²ğ—¯ğ—¼ğ—¼ğ—¸\nğŸ°. ğ—§ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ˜ƒğ—²Ì‚Ì€ ğ—¯ğ—¼ğ˜\nğŸ±. ğ—§ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ—°ğ—®Ì ğ—»ğ—µğ—®Ì‚ğ—» ğ—°ğ˜‚Ì‰ğ—® ğ—¯ğ—®Ì£ğ—»\nğŸ². ğ—Ÿğ—®Ì‚Ìğ˜† ğ—¨ğ—œğ—— ğ—™ğ—®ğ—°ğ—²ğ—¯ğ—¼ğ—¼ğ—¸ ğ—°ğ˜‚Ì‰ğ—® ğ—¯ğ—®Ì£ğ—»\nğŸ³. ğ—«ğ—²ğ—º ğ˜ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ˜ƒğ—²Ì‚Ì€ ğ—°ğ—¼ğ˜ƒğ—¶ğ—±\nğŸ´. ğ—šğ—µğ—²Ìğ—½ Ä‘ğ—¼Ì‚ğ—¶ ğ˜ƒğ—¼Ì›Ìğ—¶ ğ—¯ğ—®Ì£ğ—» ğ—¿ğ—®ğ—»ğ—±ğ—¼ğ—º ğ˜ğ—¿ğ—¼ğ—»ğ—´ ğ—»ğ—µğ—¼Ìğ—º\nğŸµ. ğ—§ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ—ºğ—®Ìğ˜† ğ—°ğ—µğ˜‚Ì‰ ğ—¯ğ—¼ğ˜\nğŸ­ğŸ¬. ğ—–ğ—®ğ—½ ğ—ªğ—®ğ—¹ğ—¹ ğ—™ğ—®ğ—°ğ—²ğ—¯ğ—¼ğ—¼ğ—¸ ğ—°ğ˜‚Ì‰ğ—® ğ—¯ğ—®Ì£ğ—»\n\n[âšœï¸] âœ ğ—¥ğ—²ğ—½ğ—¹ğ˜† ğ˜ğ—¶ğ—» ğ—»ğ—µğ—®Ì†Ìğ—» ğ—»ğ—®Ì€ğ˜† ğ˜ğ—µğ—²ğ—¼ ğ˜€ğ—¼Ì‚Ì Ä‘ğ—²Ì‚Ì‰ ğ˜…ğ—²ğ—º ğ˜ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ—¯ğ—®Ì£ğ—» ğ—ºğ˜‚ğ—¼Ì‚Ìğ—» ğ˜…ğ—²ğ—º\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n===ã€Œ${thu} || ${gio}ã€===`
        return api.sendMessage({body: msg, attachment: (await global.nodemodule["axios"]({
url: (await global.nodemodule["axios"]('https://docs-api.jrtxtracy.repl.co/images/anime?apikey=JRTvip_2200708248')).data.data,
method: "GET",
responseType: "stream"
})).data
},event.threadID,(error, info) => {
        
            global.client.handleReply.push({
                type: "choosee",
                name: this.config.name,
                author: event.senderID,
                messageID: info.messageID
            })
        })
    }
module.exports.handleReply = async function ({
    args,
    event,
    Users,
    Threads,
    api,
    handleReply,
    Currencies,
    __GLOBAL
}) {
  const { threadID, messageID, userID } = event;
  const axios = require("axios");
  const fs = require("fs-extra");
        api.sendMessage(`[âšœï¸] âœ Vui lÃ²ng chá» 1 xÃ­u !!!`, event.threadID, (err, info) =>
	setTimeout(() => {api.unsendMessage(info.messageID) } , 100000));
  const request = require("request");
       const nameUser = (await Users.getData(event.senderID)).name || (await Users.getInfo(envent.senderID)).name;
  let data = (await Currencies.getData(event.senderID)).ghepTime;
 
    
    switch (handleReply.type) {
    case "choosee": {
        switch (event.body) {
        case "1": {
          const axios = global.nodemodule["axios"];
const fs = global.nodemodule["fs-extra"];
const { threadID, messageID, userID } = event;
  async function streamURL(url, mime='jpg') {
    const dest = `${__dirname}/cache/${Date.now()}.${mime}`,
    downloader = require('image-downloader'),
    fse = require('fs-extra');
    await downloader.image({
        url, dest
    });
    setTimeout(j=>fse.unlinkSync(j), 60*1000, dest);
    return fse.createReadStream(dest);
};
  let threadInfo = await api.getThreadInfo(event.threadID);
  let threadName = threadInfo.threadName;
  let id = threadInfo.threadID;
  let sex = threadInfo.approvalMode;
  var pd = sex == false ? 'Táº¯t' : sex == true ? 'Báº­t' : '\n';
  let qtv = threadInfo.adminIDs.length;
  let color = threadInfo.color;
  let icon = threadInfo.emoji;
  let threadMem = threadInfo.participantIDs.length;
  api.unsendMessage(handleReply.messageID);
        var msg = `=====ã€Œ ğ—§ğ—›ğ—¢Ì‚ğ—¡ğ—š ğ—§ğ—œğ—¡ ğ—¡ğ—›ğ—¢Ìğ—  ã€=====\n\n[ğŸ˜ï¸] âœ ğ—§ğ—²Ì‚ğ—» ğ—»ğ—µğ—¼Ìğ—º: ${threadName}\n[âš™ï¸] âœ ğ—œğ—— ğ—»ğ—µğ—¼Ìğ—º: ${id}\n[ğŸ‘¥] âœ ğ—¦ğ—¼Ì‚Ì ğ˜ğ—µğ—®Ì€ğ—»ğ—µ ğ˜ƒğ—¶ğ—²Ì‚ğ—» ğ—»ğ—µğ—¼Ìğ—º: ${threadMem}\n[ğŸ’] âœ ğ—¤ğ˜‚ğ—®Ì‰ğ—» ğ˜ğ—¿ğ—¶Ì£ ğ˜ƒğ—¶ğ—²Ì‚ğ—»: ${qtv}\n[ğŸŒ·] âœ ğ—£ğ—µğ—²Ì‚ ğ—±ğ˜‚ğ˜†ğ—²Ì‚Ì£ğ˜: ${pd}\n[ğŸ˜»] âœ ğ—•ğ—¶ğ—²Ì‚Ì‰ğ˜‚ ğ˜ğ˜‚Ì›ğ—¼Ì›Ì£ğ—»ğ—´ ğ—°ğ—®Ì‰ğ—º ğ˜…ğ˜‚Ìğ—°: ${icon ? icon : 'KhÃ´ng sá»­ dá»¥ng'}\n[ğŸ’] âœ ğ— ğ—®Ìƒ ğ—´ğ—¶ğ—®ğ—¼ ğ—±ğ—¶ğ—²Ì‚Ì£ğ—»: ${color}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n[ğŸ‘] âœ ğ—§ğ—¼Ì‚Ì‰ğ—»ğ—´ ğ˜€ğ—¼Ì‚Ì ğ˜ğ—¶ğ—» ğ—»ğ—µğ—®Ì†Ìğ—» ğ—°ğ˜‚Ì‰ğ—® ğ—»ğ—µğ—¼Ìğ—º: ${threadInfo.messageCount}\n[ğŸ€] âœ ğ—£ğ—µğ—¶Ìğ—® ğ˜ğ—¿ğ—²Ì‚ğ—» ğ—¹ğ—®Ì€ ğ˜ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜ğ—¶ğ—» ğ—°ğ˜‚Ì‰ğ—® ğ—»ğ—µğ—¼Ìğ—º ğ—¯ğ—®Ì£ğ—» ğ—±ğ˜‚Ì€ğ—»ğ—´ ${global.config.PREFIX}ğ—¯ğ—¼ğ˜… ğ—¶ğ—»ğ—³ğ—¼ Ä‘ğ—²Ì‚Ì‰ ğ˜…ğ—²ğ—º ğ—°ğ—µğ—¶ ğ˜ğ—¶ğ—²Ì‚Ìğ˜ `
        return api.sendMessage({body: msg, attachment: [await streamURL(threadInfo.imageSrc), await streamURL(`https://graph.facebook.com/${event.senderID}/picture?height=720&width=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)]},event.threadID, event.messageID)
        }
        case "2": {
          api.unsendMessage(handleReply.messageID);
          const request = require('request');
          const fs = global.nodemodule["fs-extra"];
    var callback = () => api.sendMessage(

  {body:`[âšœï¸]=== ã€ INFORMATION ADMIN ã€ ===[âšœï¸]
â—†â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—†

[ğŸ‘€]âœ TÃªn: Nguyá»…n Háº£i ÄÄƒng
[ğŸ’®]âœ Biá»‡t danh: JRT 
[â]âœ NgÃ y thÃ¡ng nÄƒm sinh: 26/02/2003 
[ğŸ‘¤]âœ Giá»›i tÃ­nh: Nam
[ğŸ’«]âœ Chiá»u cao cÃ¢n náº·ng: 1m75 x 68 kg
[â¤ï¸]âœ TÃªn duyÃªn pháº­n: Nguyá»…n Há»“ng Pháº¥n
[ğŸ§¸]âœ Biá»‡t danh: Tracy
[ğŸ’¥]âœ NgÃ y sinh: 07/12/2001
[ğŸ’˜]âœ Má»‘i quan há»‡: ÄÃ£ Ä‘Ã­nh hÃ´n
[ğŸŒ]âœ QuÃª quÃ¡n: PhÃº Thá» - HÃ  Ná»™i
[ğŸŒ¸]âœ TÃ­nh cÃ¡ch: HÃ²a Ä‘á»“ng, nÄƒng ná»•, dá»©t khoÃ¡t, thÃ¢n thiá»‡n vÃ  hÃ i hÆ°á»›c
[ğŸŒ€]âœ Sá»Ÿ thÃ­ch: ThÃ­ch cÃ¡i Ä‘áº¹p, Ä‘i phÆ°á»£t, giao lÆ°u ca hÃ¡t, thÆ°á»Ÿng thá»©c cÃ¡c mÃ³n áº©m thá»±c khÃ¡c nhau

[âšœï¸]=== ã€ CONTACT ã€ ===[âšœï¸]
â—†â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—†

[ğŸ‘‰]âœ Information: https://bio.link/nhdjrt262
[â˜]âœ SÄT & Zalo: 0396049649
[ğŸŒ]âœ Facebook: https://www.facebook.com/NHD.JRT.262
[â›±]âœ TikTok: https://www.tiktok.com/@hd.jrt03
[â›²]âœ Instagram: https://www.instagram.com/hd.jrt.2k3
[ğŸ”]âœ Twitter: https://twitter.com/JRTOfficial_03
[ğŸ“‹]âœ Telegram: https://t.me/nhdjrt262
[ğŸ¬]âœ Youtube: https://www.youtube.com/channel/UCNK_WugSVHOSAIPKr2epEOQ
[âœ‰ï¸]âœ Email: dangz123456789z@gmail.com || lehonguyen2k3@gmail.com

[âšœï¸]=== ã€ CONTACT ã€ ===[âšœï¸]
â—†â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—†

[ğŸ’µ]âœ MOMO: 0354838459 / https://i.imgur.com/Ed0rDrO.png / Nguyá»…n Há»“ng Pháº¥n
[ğŸ’µ]âœ MOMO: 0396049649 / https://i.imgur.com/Hxbs1q0.png / Nguyá»…n Háº£i ÄÄƒng
[ğŸ’µ]âœ MBBANK: 0396049649 / https://imgur.com/NXX9Lnh / Nguyá»…n Háº£i ÄÄƒng
[ğŸ’µ]âœ MBBANK: 0396049649 / https://i.imgur.com/2yj1jqY.png / Nguyá»…n Há»“ng Pháº¥n
[ğŸ’µ]âœ TIMO BANK: 9021288475332 / https://i.imgur.com/vTx2DQp.jpg / Nguyá»…n Háº£i ÄÄƒng
[ğŸ’µ]âœ ZALO PAY: 0396049649 / https://imgur.com/LBeXzsy / Nguyá»…n Háº£i ÄÄƒng
[ğŸ’µ]âœ AGRIBANK: 4810205345666 / https://i.imgur.com/DObUFKB.png / Nguyá»…n Há»“ng Pháº¥n

[âšœï¸]=== ã€ PROBLEM ã€ ===[âšœï¸]
â—†â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—†

[â—]âœ Má»i tháº¯c máº¯c hay bot khÃ´ng hoáº¡t Ä‘á»™ng cÃ³ thá»ƒ há»i trá»±c tiáº¿p admin theo cÃ¡c link á»Ÿ trÃªn.
[ğŸ“Œ]âœ HÃ£y Ä‘á»“ng hÃ nh cÃ¹ng BOT JRT vÃ  mÃ¬nh nhÃ©. Cáº£m Æ¡n má»i ngÆ°á»i <3

âœï¹ï¹ï¹ï¹ï¹ï¹ï¹ï¹ï¹ï¹ï¹

[ğŸ“]âœ Bot Ä‘Æ°á»£c Ä‘iá»u hÃ nh bá»Ÿi JRT`,

    attachment: fs.createReadStream(__dirname + "/cache/1.png")}, event.threadID, () => 

    fs.unlinkSync(__dirname + "/cache/1.png"));  

      return request(

        encodeURI(`https://graph.facebook.com/${100033478361032}/picture?height=720&width=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)).pipe(

fs.createWriteStream(__dirname+'/cache/1.png')).on('close',() => callback());

       };
        case "3": {
          api.unsendMessage(handleReply.messageID);
          var { userInfo, adminIDs } = await api.getThreadInfo(event.threadID);    
    var success = 0, fail = 0;
    var arr = [];
    for (const e of userInfo) {
        if (e.gender == undefined) {
            arr.push(e.id);
        }
    };

    adminIDs = adminIDs.map(e => e.id).some(e => e == api.getCurrentUserID());
    if (arr.length == 0) {
        return api.sendMessage("[âšœï¸] âœ Trong nhÃ³m báº¡n khÃ´ng tá»“n táº¡i 'NgÆ°á»i dÃ¹ng Facebook'.", event.threadID);
    }
    else {
        api.sendMessage("[âšœï¸] âœ NhÃ³m báº¡n hiá»‡n cÃ³ " + arr.length + " 'NgÆ°á»i dÃ¹ng Facebook'.", event.threadID, function () {
            if (!adminIDs) {
                api.sendMessage("[âšœï¸] âœ NhÆ°ng bot khÃ´ng pháº£i lÃ  quáº£n trá»‹ viÃªn nÃªn khÃ´ng thá»ƒ lá»c Ä‘Æ°á»£c.", event.threadID);
            } else {
                api.sendMessage("[âšœï¸] âœ Báº¯t Ä‘áº§u lá»c..", event.threadID, async function() {
                    for (const e of arr) {
                        try {
                            await new Promise(resolve => setTimeout(resolve, 1000));
                            await api.removeUserFromGroup(parseInt(e), event.threadID);   
                            success++;
                        }
                        catch {
                            fail++;
                        }
                    }
                  
                    api.sendMessage("[âšœï¸] âœ ÄÃ£ lá»c thÃ nh cÃ´ng " + success + " ngÆ°á»i.", event.threadID, function() {
                        if (fail != 0) return api.sendMessage("[âšœï¸] âœ Lá»c tháº¥t báº¡i " + fail + " ngÆ°á»i.", event.threadID);
                    });
                })
            }
        })
    }
}
        case "4": {
          api.unsendMessage(handleReply.messageID);
          async function streamURL(url, mime='jpg') {
    const dest = `${__dirname}/cache/${Date.now()}.${mime}`,
    downloader = require('image-downloader'),
    fse = require('fs-extra');
    await downloader.image({
        url, dest
    });
    setTimeout(j=>fse.unlinkSync(j), 60*1000, dest);
    return fse.createReadStream(dest);
}; 
  const moment = require("moment-timezone");
    var gio = moment.tz("Asia/Ho_Chi_Minh").format("D/MM/YYYY || HH:mm:ss");
    var thu = moment.tz('Asia/Ho_Chi_Minh').format('dddd');
  if (thu == 'Sunday') thu = 'Chá»§ Nháº­t'
  if (thu == 'Monday') thu = 'Thá»© Hai'
  if (thu == 'Tuesday') thu = 'Thá»© Ba'
  if (thu == 'Wednesday') thu = 'Thá»© TÆ°'
  if (thu == "Thursday") thu = 'Thá»© NÄƒm'
  if (thu == 'Friday') thu = 'Thá»© SÃ¡u'
  if (thu == 'Saturday') thu = 'Thá»© Báº£y'
const admin = config.ADMINBOT
    const ndh = config.NDH
          const namebot = config.BOTNAME
          const { commands } = global.client;
          const axios = require('axios');
       api.unsendMessage(handleReply.messageID);
    return api.sendMessage({body: `==== [ ğ—•ğ—¢ğ—§ ğ—œğ—¡ğ—™ğ—¢ ] ====
â”â”â”â”â”â”â”â”â”â”â”\n\n[ğŸ–¥] âœ ğ— ğ—¼ğ—±ğ˜‚ğ—¹ğ—²ğ˜€: ğ—–ğ—¼Ì ${commands.size} ğ—¹ğ—²Ì£Ì‚ğ—»ğ—µ ğ—°ğ—¼Ì ğ˜ğ—µğ—²Ì‚Ì‰ ğ˜€ğ˜‚Ì›Ì‰ ğ—±ğ˜‚Ì£ğ—»ğ—´ ğ˜ğ—¿ğ—²Ì‚ğ—» ğ—¯ğ—¼ğ˜\n[ğŸ“] âœ ğ—£ğ—¿ğ—²ğ—³ğ—¶ğ˜…: ğ——ğ—®Ì‚Ìğ˜‚ ğ—¹ğ—²Ì£Ì‚ğ—»ğ—µ ğ—µğ—²Ì£Ì‚ ğ˜ğ—µğ—¼Ì‚Ìğ—»ğ—´ ğ˜ğ—¿ğ—²Ì‚ğ—» ğ—¯ğ—¼ğ˜ ğ—¹ğ—®Ì€ [ ${global.config.PREFIX} ]\n[ğŸ’“] âœ ğ—¡ğ—®ğ—ºğ—² ğ—¯ğ—¼ğ˜: ${namebot}\n[ğŸ’¬] âœ ğ—Ÿğ—¶ğ˜€ğ˜ğ—¯ğ—¼ğ˜…: ğ—›ğ—¶ğ—²Ì£Ì‚ğ—» ğ˜ğ—®Ì£ğ—¶ ğ—¯ğ—¼ğ˜ Ä‘ğ—®ğ—»ğ—´ ğ—¼Ì›Ì‰ ${global.data.allThreadID.length} ğ—¯ğ—¼ğ˜…\n[ğŸ‘‘] âœ ğ—›ğ—¶ğ—²Ì£Ì‚ğ—» ğ˜ğ—®Ì£ğ—¶ ğ—¯ğ—¼ğ˜ Ä‘ğ—®ğ—»ğ—´ ğ—°ğ—¼Ì ${admin.length} ğ—®ğ—±ğ—ºğ—¶ğ—» ğ˜ƒğ—®Ì€  ${ndh.length} ğ—»ğ—±ğ—µ\nâ”â”â”â”â”â”â”â”â”â”â”\n===ã€Œ${thu} || ${gio}ã€===`, attachment: await streamURL(`https://graph.facebook.com/${event.senderID}/picture?height=720&width=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)},event.threadID, event.messageID)
        }
        case "5": {
          api.unsendMessage(handleReply.messageID);
   const fs = global.nodemodule["fs-extra"];
    const request = global.nodemodule["request"];
    const axios = global.nodemodule['axios'];
          const req = await axios.get(`https://golike.com.vn/func-api.php?user=${event.senderID}`);
  const finduid = req.data.data.uid;
  const finddate = req.data.data.date;   
  const moment = require("moment-timezone");
    var gio = moment.tz("Asia/Ho_Chi_Minh").format("D/MM/YYYY || HH:mm:ss");
    var thu = moment.tz('Asia/Ho_Chi_Minh').format('dddd');
  if (thu == 'Sunday') thu = 'Chá»§ Nháº­t'
  if (thu == 'Monday') thu = 'Thá»© Hai'
  if (thu == 'Tuesday') thu = 'Thá»© Ba'
  if (thu == 'Wednesday') thu = 'Thá»© TÆ°'
  if (thu == "Thursday") thu = 'Thá»© NÄƒm'
  if (thu == 'Friday') thu = 'Thá»© SÃ¡u'
  if (thu == 'Saturday') thu = 'Thá»© Báº£y'        
          const res = await axios.get(`https://www.nguyenmanh.name.vn/api/fbInfo?id=${finduid}&apikey=LV7LWgAp`);  
  var gender = res.data.result.gender == 'male' ? "Nam" : res.data.result.gender == 'female' ? "NuÌ›Ìƒ" : "ğ—ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜…ğ—®Ìğ—° Ä‘ğ—¶Ì£ğ—»ğ—µ";
    var birthday = res.data.result.birthday ? `${res.data.result.birthday}` : "ğ—ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜…ğ—®Ìğ—° Ä‘ğ—¶Ì£ğ—»ğ—µ";
    var love = res.data.result.love ? `${res.data.result.love}` : "ğ—ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜…ğ—®Ìğ—° Ä‘ğ—¶Ì£ğ—»ğ—µ"
    var website = res.data.result.website ? `${res.data.result.website}` : "ğ—ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜…ğ—®Ìğ—° Ä‘ğ—¶Ì£ğ—»ğ—µ"
    var about = res.data.result.about ? `${res.data.result.about}` : "ğ—ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜…ğ—®Ìğ—° Ä‘ğ—¶Ì£ğ—»ğ—µ" 
    var quotes = res.data.result.quotes ? `${res.data.result.quotes}` : "ğ—ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜…ğ—®Ìğ—° Ä‘ğ—¶Ì£ğ—»ğ—µ"  
    var relationship = res.data.result.relationship ? `${res.data.result.relationship}` : "ğ—ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜…ğ—®Ìğ—° Ä‘ğ—¶Ì£ğ—»ğ—µ"
    var location = res.data.result.location ? `${res.data.result.location}` : "ğ—ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜…ğ—®Ìğ—° Ä‘ğ—¶Ì£ğ—»ğ—µ"
	var hometown = res.data.result.hometown ? `${res.data.result.hometown}` : "ğ—ğ—µğ—¼Ì‚ğ—»ğ—´ ğ˜…ğ—®Ìğ—° Ä‘ğ—¶Ì£ğ—»ğ—µ"
    var url_profile = res.data.result.profileUrl  ? `${res.data.result.profileUrl}` : `${url_profile}`
    var callback = () => api.sendMessage({body:`=== ã€ ğ—œğ—¡ğ—™ğ—¢ğ—¥ğ— ğ—”ğ—§ğ—œğ—¢ğ—¡ ã€ ===\nâ”â”â”â”â”â”â”â”â”â”â”\n\n[ğŸ‘¤]âœ ğ—§ğ—²Ì‚ğ—»: ${res.data.result.name}\n[ğŸ”]âœ ğ—¨ğ—œğ——: ${finduid}\n[ğŸ“†] âœ ğ—¡ğ—´ğ—®Ì€ğ˜† ğ˜ğ—®Ì£ğ—¼ ğ—®ğ—°ğ—°: ${finddate}\n[ğŸ‘€]âœ ğ—™ğ—¼ğ—¹ğ—¹ğ—¼ğ˜„: ${res.data.result.follow}\n[ğŸ‘­]âœ ğ—šğ—¶ğ—¼Ì›Ìğ—¶ ğ˜ğ—¶Ìğ—»ğ—µ: ${gender}\n[ğŸ‰]âœ ğ—¦ğ—¶ğ—»ğ—µ ğ—»ğ—µğ—®Ì£Ì‚ğ˜: ${birthday}\n[ğŸ’Œ]âœ ğ—§ğ—²Ì‚ğ—» ğ—±ğ˜‚ğ˜†ğ—²Ì‚ğ—» ğ—½ğ—µğ—®Ì£Ì‚ğ—»: ${love}\n[â¤ï¸]âœ ğ— ğ—¼Ì‚Ìğ—¶ ğ—¾ğ˜‚ğ—®ğ—» ğ—µğ—²Ì£Ì‚: ${relationship}\n[ğŸ¡]âœ ğ—¦ğ—¼Ì‚Ìğ—»ğ—´ ğ˜ğ—®Ì£ğ—¶: ${location}\n[ğŸŒ]âœ Äğ—²Ì‚Ìğ—» ğ˜ğ˜‚Ì›Ì€: ${hometown}\n[ğŸ‘‰]âœ ğ—šğ—¶ğ—¼Ì›Ìğ—¶ ğ˜ğ—µğ—¶ğ—²Ì£Ì‚ğ˜‚ ğ—¯ğ—®Ì‰ğ—» ğ˜ğ—µğ—®Ì‚ğ—»:\n${about}\n[ğŸ“]âœ ğ—§ğ—¿ğ—¶Ìğ—°ğ—µ ğ—±ğ—®Ì‚Ìƒğ—»:\n${quotes}\n[ğŸŒ]âœ ğ—ªğ—²ğ—¯ğ˜€ğ—¶ğ˜ğ—²: ${website}\n[ğŸ“Œ]âœ ğ—Ÿğ—¶ğ—»ğ—¸ ğ—™ğ—®ğ—°ğ—²ğ—¯ğ—¼ğ—¼ğ—¸: ${url_profile}\nâ”â”â”â”â”â”â”â”â”â”â”\n===ã€Œ${thu} || ${gio}ã€===`,
        attachment: fs.createReadStream(__dirname + "/cache/1.png")}, event.threadID,
        () => fs.unlinkSync(__dirname + "/cache/1.png"),event.messageID); 
    return request(encodeURI(`https://graph.facebook.com/${finduid}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)).pipe(fs.createWriteStream(__dirname+'/cache/1.png')).on('close',
        () => callback());
}
            case "6" : {
  const axios = require("axios")
  async function streamURL(url, mime='jpg') {
    const dest = `${__dirname}/cache/${Date.now()}.${mime}`,
    downloader = require('image-downloader'),
    fse = require('fs-extra');
    await downloader.image({
        url, dest
    });
    setTimeout(j=>fse.unlinkSync(j), 60*1000, dest);
    return fse.createReadStream(dest);
};
      const moment = require("moment-timezone");
var tpk = moment.tz("Asia/Ho_Chi_Minh").format("HH:mm:ss || D/MM/YYYY");
  const name = await Users.getNameUser(event.senderID)
  const res = await axios.get(`https://golike.com.vn/func-api.php?user=${event.senderID}`);
  if (res.status == 200) {
  const finduid = res.data.data.uid
  const finddate = res.data.data.date
  api.unsendMessage(handleReply.messageID);  
       api.sendMessage({body: `ğŸŒ==== [ ğ—¨ğ—œğ—— ğ—™ğ—”ğ—–ğ—˜ğ—•ğ—¢ğ—¢ğ— ] ====ğŸŒ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[ğŸ„] âœ ğ—§ğ—²Ì‚ğ—»: ${name}
[ğŸ“Œ] âœ ğ—œğ—— ğ—™ğ—®ğ—°ğ—²ğ—¯ğ—¼ğ—¼ğ—¸: ${finduid}\n[ğŸ“†] âœ ğ—¡ğ—´ğ—®Ì€ğ˜† ğ˜ğ—®Ì£ğ—¼: ${finddate}`, attachment: await streamURL(`https://graph.facebook.com/${event.senderID}/picture?height=720&width=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`)},event.threadID, event.messageID)
        }
            }
            case "7": {
          const axios_1 = require("axios");
  const moment = require("moment-timezone");
  var time = moment.tz("Asia/Ho_Chi_Minh").format("YYYY");
   let fetchdata = await axios_1.get("https://static.pipezero.com/covid/data.json");
  var jsondata = (await fetchdata.data).total;
  var vn = (await fetchdata.data).overview[6];
  var year = vn.date + `-` + time;
  var world = jsondata.world,
    nhiemtg = world.cases,
    chettg = world.death,
    hoiphuctg = world.recovered,
    //////////////////////////////
    nhiemvn = vn.cases,
    chetvn = vn.death,
    hoiphucvn = vn.recovered,
    dieutrivn = vn.treating,
    //////////////////////////////
    nhiemvn7days = vn.avgCases7day,
    hoiphucvn7days = vn.avgRecovered7day,
    chetvn7days = vn.avgDeath7day,
    //////////////////////////////
    ptchetvn = Math.round((chetvn * 100) / nhiemvn),
    pthoiphucvn = Math.round((hoiphucvn * 100) / nhiemvn),
    ptchettg = Math.round((chettg * 100) / nhiemtg),
    pthoiphuctg = Math.round((hoiphuctg * 100) / nhiemtg),
    pthoiphucvn = pthoiphucvn.toString().split(".")[0],
    ptdieutrivn = (100 - pthoiphucvn - ptchetvn).toString().split(".")[0];
  /////////////////////////////////
  ptchetvn = ptchetvn.toString().split(".")[0];
  pthoiphuctg = pthoiphuctg.toString().split(".")[0];
  ptchettg = ptchettg.toString().split(".")[0];
  api.unsendMessage(handleReply.messageID);
  return api.sendMessage(
    "====== Tháº¿ Giá»›i ======\n" +
    `[ğŸ˜·] âœ Nhiá»…m: ${nhiemtg}\n` +
    `[ğŸ’š] âœ Há»“i phá»¥c: ${hoiphuctg} (${pthoiphuctg}%)\n` +
    `[ğŸ’€] âœ Tá»­ vong: ${chettg} (${ptchettg}%)\n` +
    "====== Viá»‡t Nam ======\n" +
    `[ğŸ˜·] âœ Nhiá»…m: ${nhiemvn}\n` +
    `[ğŸ’‰] âœ Äang Ä‘iá»u trá»‹: ${dieutrivn} (${ptdieutrivn}%)\n` +
    `[ğŸ’š] âœ Há»“i phá»¥c: ${hoiphucvn} (${pthoiphucvn}%)\n` +
    `[ğŸ’€] âœ Tá»­ vong: ${chetvn} (${ptchetvn}%)\n` +
    `[ğŸ¤¨] âœ NhiÃªÌƒm 7 ngaÌ€y: ${nhiemvn7days}\n` +
    `[â¤] âœ Há»“i phá»¥c 7 ngaÌ€y: ${hoiphucvn7days}\n` +
    `[â˜ ï¸] âœ Tá»­ vong 7 ngaÌ€y: ${chetvn7days}\n\n` +
    //`Tin tá»©c: ${news.vietnam}\n` +
    `[â±ï¸] âœ Cáº­p nháº­t: ${year}`,
    event.threadID, event.messageID
  );
}
             case "8": {
             const fs = global.nodemodule["fs-extra"];
    const axios = global.nodemodule["axios"];
  let mung = [
    "ChÃºc 2 báº¡n trÄƒm nÄƒm háº¡nh phÃºt",
    "ChÃºc 2 báº¡n xÃ¢y dá»±ng Ä‘Æ°á»£c 1 tá»• áº¥m háº¡nh phÃºc",
    "ChÃºc 2 báº¡n cÃ¹ng nhau nÆ°Æ¡ng tá»±a Ä‘áº¿n cuá»‘i Ä‘á»i",
    "ChÃºc 2 báº¡n háº¡nh phÃºc",
    "TrÃ¡ch pháº­n vÃ´ duyÃªn...",
  "HÆ¡i tháº¥p nhÆ°ng khÃ´ng sao. HÃ£y cá»‘ gáº¯ng lÃªn!",
  "3 pháº§n duyÃªn ná»£, 7 pháº§n cá»‘ gáº¯ng",
  "Tá»· lá»‡ mÃ  má»‘i quan há»‡ nÃ y cÃ³ thá»ƒ nÃªn duyÃªn cÅ©ng khÃ¡ lÃ  nhá» Ä‘áº¥y! Pháº£i cá»‘ gáº¯ng hÆ¡n ná»¯a",
  "Date vá»›i nhau Ä‘i. Äá»ƒ má»‘i quan há»‡ nÃ y cÃ³ thá»ƒ tiáº¿n xa hÆ¡n",
  "HÃ£y chá»§ Ä‘á»™ng báº¯t chuyá»‡n hÆ¡n ná»¯a. Hai báº¡n khÃ¡ lÃ  há»£p Ä‘Ã´i",
  "HÃ£y tin vÃ o duyÃªn sá»‘ Ä‘i, vÃ¬ nÃ³ cÃ³ tháº­t Ä‘áº¥y!",
  "Há»£p Ä‘Ã´i láº¯m Ä‘áº¥y. Quan tÃ¢m chÄƒm sÃ³c cho má»‘i quan há»‡ nÃ y nhiá»u hÆ¡n ná»¯a nhÃ©!",
  "LÆ°u sá»‘ nhau Ä‘i, bao giá» cÆ°á»›i thÃ¬ gá»i nhau lÃªn lá»… Ä‘Æ°á»ng!",
  "CÆ°á»›i Ä‘i chá» chi!"
  ]
  let chuc = mung[Math.floor(Math.random() * mung.length)]
    let {
        senderID,
        threadID,
        messageID
    } = event;
    const {
        loadImage,
        createCanvas
    } = require("canvas");
    let path = __dirname + "/cache/ghep.png";
    let pathAvata = __dirname + `/cache/avt${senderID}.png`;
    let pathAvataa = __dirname + `/cache/avtghep.png`;
    var { participantIDs } =(await Threads.getData(event.threadID)).threadInfo;
  var tle = Math.floor(Math.random() * 101);
    const botID = api.getCurrentUserID();
    const listUserID = event.participantIDs.filter(ID => ID != botID && ID != event.senderID);
    var id = listUserID[Math.floor(Math.random() * listUserID.length)];
    var name = (await Users.getData(id)).name
    var namee = (await Users.getData(event.senderID)).name
    let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
    let getAvatarTwo = (await axios.get(`https://graph.facebook.com/${id}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
    let bg = (
        await axios.get(`https://i.imgur.com/RBOJ6ot.png`, {
            responseType: "arraybuffer",
        })
    ).data;
    fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
    fs.writeFileSync(pathAvataa, Buffer.from(getAvatarTwo, 'utf-8'));
    fs.writeFileSync(path, Buffer.from(bg, "utf-8"));
    avataruser = await this.circle(pathAvata);
    avataruser2 = await this.circle(pathAvataa);
    let imgB = await loadImage(path);
    let baseAvata = await loadImage(avataruser);
    let baseAvataa = await loadImage(avataruser2);
    let canvas = createCanvas(imgB.width, imgB.height);
    let ctx = canvas.getContext("2d");
    ctx.drawImage(imgB, 0, 0, canvas.width, canvas.height);
    ctx.drawImage(baseAvata, 92, 135, 100, 100);
    ctx.drawImage(baseAvataa, 652, 134, 100, 100);
    ctx.beginPath();
    const imageBuffer = canvas.toBuffer();
    fs.writeFileSync(path, imageBuffer);
    api.unsendMessage(handleReply.messageID);
    return api.sendMessage({body: `${namee} ğŸ’“ ${name}\n[âšœï¸]âœ Lá»i chÃºc: ${chuc}`,
            attachment: fs.createReadStream(path)
        },
        threadID,
        () => fs.unlinkSync(path),
        messageID
    );
};  
             case "9": {
               const { cpu, cpuTemperature, currentLoad, memLayout, diskLayout, mem, osInfo } = global.nodemodule["systeminformation"];
	const timeStart = Date.now();

	try {
		var { manufacturer, brand, speed, physicalCores, cores } = await cpu();
		var { main: mainTemp } = await cpuTemperature();
		var { currentLoad: load } = await currentLoad();
		var diskInfo = await diskLayout();
		var memInfo = await memLayout();
		var { total: totalMem, available: availableMem } = await mem();
		var { platform: OSPlatform, build: OSBuild } = await osInfo();

		var time = process.uptime();
		var hours = Math.floor(time / (60 * 60));
		var minutes = Math.floor((time % (60 * 60)) / 60);
		var seconds = Math.floor(time % 60);
		if (hours < 10) hours = "0" + hours;
		if (minutes < 10) minutes = "0" + minutes;
		if (seconds < 10) seconds = "0" + seconds;
    api.unsendMessage(handleReply.messageID);
		return api.sendMessage(
			"===[ System Info ]===" +
			"\n[âšœï¸] CPU [âšœï¸]" +
			"\nâœ CPU Model: " + manufacturer + brand +
			"\nâœ Speed: " + speed + "GHz" +
			"\nâœ Cores: " + physicalCores +
			"\nâœ Threads: " + cores +
			"\nâœ Temperature: " + mainTemp + "Â°C" +
			"\nâœ Load: " + load.toFixed(1) + "%" +
			"\n[âšœï¸] MEMORY [âšœï¸]" +
			"\nâœ Size: " + byte2mb(memInfo[0].size) +
			"\nâœ Type: " + memInfo[0].type +
			"\nâœ Total: " + byte2mb(totalMem) +
			"\nâœ Available: " + byte2mb(availableMem) +
			"\n[âšœï¸] DISK [âšœï¸]" +
			"\nâœ Name: " + diskInfo[0].name +
			"\nâœ Size: " + byte2mb(diskInfo[0].size) +
			"\nâœ Temperature: " + diskInfo[0].temperature + "Â°C" +
			"\n[âšœï¸] OS [âšœï¸]" +
			"\nâœ Platform: " + OSPlatform +
			"\nâœ Build: " + OSBuild +
			"\nâœ Uptime: " + hours + ":" + minutes + ":" + seconds +
			"\nâœ Ping: " + (Date.now() - timeStart) + "ms",
			event.threadID, event.messageID)
	}
	catch (e) {
		console.log(e)
	}
}
          case "10": {
            api.unsendMessage(handleReply.messageID);
            const axios = require('axios');
          const moment = require("moment-timezone");
  const tpkk = moment.tz("Asia/Ho_Chi_Minh").format("DD/MM/YYYY || HH:mm:ss");
  let name = await Users.getNameUser(event.senderID);
    let mentions = [];
    mentions.push({
      tag: name,
      id: event.senderID
    })
       api.unsendMessage(handleReply.messageID);
    api.sendMessage({body: `[â³]âœ Ä‘ğ—¼Ì›Ì£ğ—¶ ğ˜ğ—¶Ì ğ—»ğ—µğ—® ${name} ğ—¯ğ—¼ğ˜ Ä‘ğ—®ğ—»ğ—´ ğ—°ğ—®ğ—½`, mentions}, event.threadID, event.messageID);
   if (Object.keys(event.mentions).length == 1) {
      var uid = Object.keys(event.mentions)[0];
    }
  else {
          var uid = event.senderID;
    }
    var cookies = `dbln=%7B%22100081774576028%22%3A%22ODXWNP4b%22%7D;sb=zMpyZNmqJ3ICWUJQsw3JaOxN;datr=zMpyZNKTSTughsvtmUNmD4jH;dpr=1.25;c_user=100081774576028;wd=1070x723;xs=21%3AVcson9zfTe8y3Q%3A2%3A1689529475%3A-1%3A6296%3A%3AAcXuf_TYM9i7k86XW6BNt-6nRuDHtrSnuUiwnT4EIw;fr=0by0O06G2aQsVnywY.AWXHgQLG2H-WwHUi5Mx4fD2I6G0.BkzJWV.9B.AAA.0.0.BkzJXj.AWVnAygMAjM;presence=C%7B%22lm3%22%3A%22g.6269717149791871%22%2C%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691129322438%2C%22v%22%3A1%7D`,
    vaildItems = ['sb', 'datr', 'c_user', 'xs', 'm_pixel_ratio', 'locale', 'wd', 'fr', 'presence', 'xs', 'm_page_voice', 'fbl_st', 'fbl_ci', 'fbl_cs', 'vpd', 'wd', 'fr', 'presence'];
    var cookie = `dbln=%7B%22100081774576028%22%3A%22ODXWNP4b%22%7D;sb=zMpyZNmqJ3ICWUJQsw3JaOxN;datr=zMpyZNKTSTughsvtmUNmD4jH;dpr=1.25;c_user=100081774576028;wd=1070x723;xs=21%3AVcson9zfTe8y3Q%3A2%3A1689529475%3A-1%3A6296%3A%3AAcXuf_TYM9i7k86XW6BNt-6nRuDHtrSnuUiwnT4EIw;fr=0by0O06G2aQsVnywY.AWXHgQLG2H-WwHUi5Mx4fD2I6G0.BkzJWV.9B.AAA.0.0.BkzJXj.AWVnAygMAjM;presence=C%7B%22lm3%22%3A%22g.6269717149791871%22%2C%22t3%22%3A%5B%5D%2C%22utc3%22%3A1691129322438%2C%22v%22%3A1%7D`;
    cookies.split(';').forEach(item => {
        var data = item.split('=');
        if (vaildItems.includes(data[0])) cookie += `${data[0]}=${data[1]};`;
    });
    var url = encodeURI(encodeURI((`https://apicap.jrtxtracy.repl.co/screenshot/${uid}/${cookie}`))),
        path = __dirname + `/cache/${uid}.png`;
    axios({
        method: "GET",
        url: `https://api.screenshotmachine.com/?key=b1b3d9&url=${url}&dimension=480x800`,
        responseType: "arraybuffer"
    }).then(res => {
        fs.writeFileSync(path, Buffer.from(res.data, "utf-8"));
        api.sendMessage({body: `ğŸŒ==== [ ğ—–ğ—”ğ—£ ğ—™ğ—”ğ—–ğ—˜ğ—•ğ—¢ğ—¢ğ— ] ====ğŸŒ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[ğŸŒ¸]âœ ğ—•ğ—¼ğ˜ ğ˜ƒğ˜‚Ì›Ì€ğ—® ğ—°ğ—®ğ—½ ğ˜…ğ—¼ğ—»ğ—´ ğ˜†ğ—²Ì‚ğ˜‚ ğ—°ğ˜‚Ì‰ğ—® ğ—°ğ˜‚Ì‰ğ—® ğ—¯ğ—®Ì£ğ—»
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[âšœï¸]âœ ğ—–ğ—®ğ—½ ğ˜„ğ—®ğ—¹ğ—¹ ğ—™ğ—®ğ—°ğ—²ğ—¯ğ—¼ğ—¼ğ—¸ ğ—±ğ—®Ì£ğ—»ğ—´ Ä‘ğ—¶ğ—²Ì£Ì‚ğ—» ğ˜ğ—µğ—¼ğ—®Ì£ğ—¶ ğ—»ğ—²Ì‚Ì€ğ—» ğ˜ğ—¿ğ—®Ì†Ìğ—»ğ—´ ğ—°ğ˜‚Ì‰ğ—® ğ—¯ğ—®Ì£ğ—» Ä‘ğ—®Ì‚ğ˜† `,mentions, attachment: fs.createReadStream(path) }, event.threadID, () => fs.unlinkSync(path), event.messageID);
    }).catch(err => console.log(err));
        };
            break;
					default:
           const choose = parseInt(event.body);
            	if (isNaN(event.body)) return api.sendMessage("[âšœï¸] âœ ğ•ğ®ğ¢ ğ¥ğ¨Ì€ğ§ğ  ğ§ğ¡ğšÌ£Ì‚ğ© ğŸ ğœğ¨ğ§ ğ¬ğ¨Ì‚Ì", event.threadID, event.messageID);
            	if (choose > 10 || choose < 1) return api.sendMessage("[âšœï¸] âœ ğ‹ğ®Ì›Ì£ğš ğœğ¡ğ¨Ì£ğ§ ğ¤ğ¡ğ¨Ì‚ğ§ğ  ğ§ğšÌ†Ì€ğ¦ ğ­ğ«ğ¨ğ§ğ  ğğšğ§ğ¡ ğ¬ğšÌğœğ¡.", event.threadID, event.messageID); 
    }
    }
}
}